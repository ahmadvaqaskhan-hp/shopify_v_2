{% comment %}
-----------------------------------------------------------------------------
  Snippet: Featured products (featured-products)
  - Custom content tool section duplicate.
  - This file is automatically generated, do not edit.
-----------------------------------------------------------------------------
{% endcomment %}
{{ 'component.featured-products.css' | asset_url | stylesheet_tag }}

{%- liquid
  assign handles = ''

  if section.settings.collection == blank
    continue
  endif

  assign collection_url = collections[section.settings.collection].url
  assign products = collections[section.settings.collection].products

  for product in products limit: 4
    assign handles = handles | append: product.handle | append: ','
  endfor

  assign handles = handles | remove_last: ','
-%}


<section
  class="component-section container"
  aria-labelledby="section-title-{{ section.id }}"
  data-component-handle="featured-products"
  data-component-type="scroll"
  data-section-schema
>
  <featured-products
    v-if="getComponentVisible('featured-products')"
    v-cloak
    :cta="{
      label: {{ section.settings.cta_label | json | escape }},
      url: {{ collection_url | json | escape }},
    }"
    :handles="{{ handles | split: ',' | json | escape }}"
    :liquid="{
      sectionId: {{ section.id | json | escape }}
    }"
    title="{{ section.settings.title | escape }}"
  ></featured-products>

  {% comment %}
  ----------------------------------------------------------------------------
    Loading state.
  ----------------------------------------------------------------------------
  {% endcomment %}
  <div v-if="!getComponentActive('featured-products')">
    <div class="featured-products is-loading critical-component-clear liquid">
      <h2
        id="section-title-{{ section.id }}"
        class="
          featured-products__title
          text-heading-l
          text-heading-xl-desktop
          text-center
        "
      >
        {{ section.settings.title }}
      </h2>

      <div class="grid">
        {% for product in products limit: 4 %}
          <div class="col xs2 l3">
            {% render 'product-card' with
              index: forloop.index0,
              loading_animation: true,
              product: product,
            %}
          </div>
        {% endfor %}
      </div>

      {% if collection_url != blank and section.settings.cta_label != blank %}
        <div class="featured-products__cta-container text-center">
          {% render 'btn' with
            block_class: 'featured-products',
            modifiers: 'outlined',
            label: section.settings.cta_label,
            url: collection_url,
          %}
        </div>
      {% endif %}
    </div>
  </div>
</section>


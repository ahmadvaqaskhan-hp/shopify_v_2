"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9011,2446],{3190:function(e,t,n){n.d(t,{Z:function(){return l}});var a=n(1797);const i={class:"icon icon__chevron icon__chevron--down",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},r=[(0,a._)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z"},null,-1)],s={};var l=(0,n(4407).Z)(s,[["render",function(e,t){return(0,a.wg)(),(0,a.iD)("svg",i,r)}]])},5131:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var a=n(1797);const i={class:"accordion"},r=["aria-controls","aria-expanded"];var s=n(9351),l=n(8518),o={name:"BundleAccordion",components:{AccordionItem:s.default},props:{control:{type:String,default:"content-1"},section:{type:String,default:""},titleClass:{type:String,default:"h5"}},data:()=>({global:!0,settings:{singleOpen:!0,expandInitial:!1,expandAll:!1,animate:!0},activeItems:[]}),methods:{toggleItem(e){const t=this.$refs[e];if(this.isItemExpanded(e)){const{activeItems:t}=this,n=t.indexOf(e);t.splice(n,1)}else this.activeItems.push(e);this.settings.scrollTo&&this.setWindowScroll(t)},isItemExpanded(e){return this.activeItems.includes(e)},setWindowScroll(e){window.matchMedia(`(min-width: ${l.Z.l})`).matches||e.item.scrollIntoView({behavior:"smooth"})}}},c=(0,n(4407).Z)(o,[["render",function(e,t,n,s,l,o){const c=(0,a.up)("accordion-item");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",{ref:n.section,class:(0,a.C_)(["accordion__item",{"is-active":l.activeItems.includes(`${n.section}`)}])},[(0,a._)("div",{class:(0,a.C_)(`accordion__title ${n.titleClass}`),"aria-controls":n.control,"aria-expanded":l.activeItems.includes(`${n.section}`),onClick:t[0]||(t[0]=(0,a.iM)((()=>o.toggleItem(`${n.section}`)),["prevent"]))},[(0,a.WI)(e.$slots,"header")],10,r),(0,a.Wm)(c,{class:"navlist","is-active":l.activeItems.includes(`${n.section}`),index:1},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"item",{item:e.item})])),_:3},8,["is-active"])],2)])}]])},477:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var a=n(1797);const i={class:"cart-family-bundle__line-item-wrapper"},r=["href"],s=["alt","src","srcset"],l={class:"cart-family-bundle__description"},o={class:"cart-family-bundle__inner"},c=["href","textContent"],d=["textContent"],u={class:"ajax-cart__price body-2"},m=["textContent"],p=["textContent"],g=["textContent"],v=["data-cart-add"],h=["textContent"],_=["textContent"];var b=n(9579),f=n(8296),w=n(719),y={name:"CartFamilyBundleSlide",components:{ProductPriceMessage:n(3995).default},props:{bundle:{type:Object,default:()=>({})},lineItem:{type:Object,default:()=>({})}},data(){var e;return{selectedVariant:(null===(e=this.bundle.variants[0])||void 0===e?void 0:e.id)||null}},computed:{variant(){console.log("getVariant family lineItem ====>>>",this.lineItem),console.log("this.lineItem.variant =>",this.lineItem.variant);const e=this.bundle.variants.find((e=>!0===e.available&&this.lineItem.variant_title.toLowerCase()===e.title.toLowerCase()));return console.log("variantAvailable",e),e||this.bundle.variants[0]},getVariantImage(){return(this.bundle.images.find((e=>e.id===this.variant.image))||this.bundle.featuredImage).src},lowestPrice(){var e;if(null===(e=this.variant)||void 0===e||!e.lowestPrice)return!1;const t=this.variant.lowestPrice.replace(/_DELETE_/g,"");return t.length>0&&t},recommendedPrice(){return this.variant.compareAtPrice.amount>this.variant.price.amount&&this.$formatMoney(this.variant.compareAtPrice.amount)},getPercentText(){const{compareAtPrice:e,price:t}=this.variant;if(!e.amount||e.amount<=t.amount)return!1;const n=100-Math.floor(t.amount/e.amount*100);return!(n<=0)&&this.$string("layout.general.sale").replace("{{amount}}",n)},hasPricingMessage(){return this.$variable("settings.pricingDirective.enable")||!1}},mounted(){console.log("cart family-bundle mount---\x3e",this.bundle)},methods:{...(0,f.nv)({addItem:"cart/addItem"}),async handleAddToCart(){clearTimeout(this.timeout);const e={};if(this.error="",this.state="adding",cnvs.EventBus.emit("family-bundle-updating"),cnvs.storybook)return this.timeout=setTimeout((()=>{this.state="added"}),w.Z.slow),void(this.timeout=setTimeout((()=>{this.state="ready"}),w.Z.message));e._undoProperties=this.lineItem.properties,e._undoProperties._undoId=this.lineItem.id,e._lowestPrice=this.variant.lowestPrice,e._recommendedPrice=this.variant.compareAtPrice;const t=[{id:this.variant.id,properties:e,quantity:this.lineItem.quantity}];try{await this.addItem(t),this.state="added",cnvs.EventBus.emit("family-bundle-remove",{key:this.lineItem.key}),this.timeout=setTimeout((()=>{this.state="ready"}),w.Z.message)}catch(e){if(this.state="error",e.length)return void(this.error=e);reportError("Failed to add product to cart",e)}},getImageUrl:(e,t)=>(0,b.M0)(e,t)}},x=(0,n(4407).Z)(y,[["render",function(e,t,n,b,f,w){const y=(0,a.up)("product-price-message");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("a",{class:"ajax-cart__image responsive-image__wrapper knockout-image",href:`/${n.bundle.handle}`},[(0,a._)("img",{alt:w.variant.title,sizes:"auto",src:w.getImageUrl(w.getVariantImage,"50x"),srcset:`\n          ${w.getImageUrl(w.getVariantImage,"120x")} 120w,\n          ${w.getImageUrl(w.getVariantImage,"240x")} 240w,\n          ${w.getImageUrl(w.getVariantImage,"320x")} 320w\n        `},null,8,s)],8,r),(0,a._)("div",l,[(0,a._)("div",o,[(0,a._)("a",{class:"cart-family-bundle__title subtitle-2",href:`/${n.bundle.handle}`,textContent:(0,a.zw)(n.bundle.title)},null,8,c),(0,a._)("span",{class:"cart-family-bundle__variant-title",textContent:(0,a.zw)(w.variant.title)},null,8,d),w.hasPricingMessage?((0,a.wg)(),(0,a.j4)(y,{key:0,"lowest-price":w.lowestPrice,"recommended-price":w.recommendedPrice},null,8,["lowest-price","recommended-price"])):(0,a.kq)("",!0),(0,a._)("div",u,[(0,a._)("span",{class:"visually-hidden",textContent:(0,a.zw)(e.$string("cart.label.original_price"))},null,8,m),(0,a._)("span",{class:(0,a.C_)(["ajax-cart__price-current",{sale:w.recommendedPrice}]),textContent:(0,a.zw)(e.$formatMoney(w.variant.price.amount))},null,10,p),w.getPercentText?((0,a.wg)(),(0,a.iD)("span",{key:0,class:"badge badge--primary",textContent:(0,a.zw)(w.getPercentText)},null,8,g)):(0,a.kq)("",!0)])]),(0,a._)("button",{class:"cart-family-bundle__add text-link",tabindex:"0","data-cart-add":w.variant.id,onClick:t[0]||(t[0]=(0,a.iM)((e=>w.handleAddToCart(n.bundle)),["prevent"]))},[(0,a._)("span",{textContent:(0,a.zw)(`+ ${e.$string("product_family_bundles.cart.cta")}`)},null,8,h),(0,a._)("span",{class:"is-hidden",textContent:(0,a.zw)(e.$string("product.cta.add_to_cart_limit"))},null,8,_)],8,v)])])}]])},9011:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var a=n(1797);const i={class:"cart-family-bundle__control accordion__control subtitle-1","aria-controls":"bundleCartDrawerContent","aria-expanded":"false"},r={class:"cart-family-bundle__heading"},s=["textContent"],l=["textContent"],o={class:"cart-family-bundle__cta--chevron"},c={id:"bundleCartDrawerContent",class:"cart-family-bundle__container",role:"region","aria-labelledby":"bundleCartDrawerAccordion1"},d={key:0,class:"swiper-button-prev swiper-button-custom","js-cart-family-bundle-carousel":"prev"},u={id:"BundleCartCarousel-0",class:"cart-family-bundle__carousel"},m={key:1,class:"swiper-button-next swiper-button-custom","js-cart-family-bundle-carousel":"next"};var p=n(3482),g=n(3335),v=n(5131),h=n(477),_=n(3190),b=n(7251),f=n(2262),w=n(8714),y={name:"CartFamilyBundle",components:{BundleAccordion:v.default,CartBundleSlide:h.default,CartFamilyBundleSlide:h.default,IconChevronDown:_.Z,IconChevronLeft:b.Z,IconChevronRight:f.Z,IconTag:w.Z,Swiper:p.tq,SwiperSlide:p.o5},props:{bundles:{type:Array,default:()=>[]},lineItem:{type:Object,default:()=>({})},nameSpace:{type:String,default:""},indexindex:{type:Number,default:0}},setup:()=>({modules:[g.W_]}),computed:{percentageText(){let e=this.$string("product_family_bundles.cart.title");const{compareAtPrice:t,price:n}=this.bundles[0];if(!t.amount||t.amount<=n.amount)return e=e.split("{{amount}}")[0],e;const a=100-Math.floor(n.amount/t.amount*100);return a<=0?(e=e.split("{{amount}}")[0],e):(e=e.replace("{{amount}}",a),e)}},data:()=>({swiper:{breakpoints:{1280:{slidesPerView:1,spaceBetween:18}},navigation:{nextEl:'[js-cart-family-bundle-carousel="next"]',prevEl:'[js-cart-family-bundle-carousel="prev"]'}}}),methods:{initCarousel(){this.$refs.bundleCarousel.update()}}},x=(0,n(4407).Z)(y,[["render",function(e,t,n,p,g,v){const h=(0,a.up)("icon-tag"),_=(0,a.up)("icon-chevron-down"),b=(0,a.up)("icon-chevron-left"),f=(0,a.up)("cart-family-bundle-slide"),w=(0,a.up)("swiper-slide"),y=(0,a.up)("swiper"),x=(0,a.up)("icon-chevron-right"),C=(0,a.up)("bundle-accordion");return(0,a.wg)(),(0,a.j4)(C,{class:"cart-family-bundle",section:`cartFamilyBundles${e.index}`},{header:(0,a.w5)((()=>[(0,a._)("div",i,[(0,a._)("span",null,[(0,a.Wm)(h)]),(0,a._)("div",r,[(0,a._)("span",{class:"cart-family-bundle__heading-title",textContent:(0,a.zw)(v.percentageText)},null,8,s),(0,a._)("p",{class:"cart-family-bundle__heading-description",textContent:(0,a.zw)(e.$string("product_family_bundles.cart.description"))},null,8,l)]),(0,a._)("div",{class:"cart-family-bundle__cta",onClick:t[0]||(t[0]=e=>v.initCarousel())},[(0,a._)("span",o,[(0,a.Wm)(_)])])])])),item:(0,a.w5)((()=>[(0,a._)("div",c,[(0,a._)("div",null,[n.bundles.length>0?((0,a.wg)(),(0,a.iD)("button",d,[(0,a.Wm)(b)])):(0,a.kq)("",!0),(0,a._)("div",u,[(0,a.Wm)(y,{ref:"bundleCarousel",class:"cart-family-bundle__slide-wrap",modules:p.modules,breakpoints:g.swiper.breakpoints,navigation:g.swiper.navigation,observer:!0,"observe-parents":!0,"prevent-interaction-on-transition":!0,"slides-per-view":1,"watch-overflow":!0},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.bundles,((e,t)=>((0,a.wg)(),(0,a.j4)(w,{key:`cart-family-bundle-${t}`,class:"cart-family-bundle__line-item swiper-slide","data-index":"${index}","data-product-id":"${item.id}","data-next-slide":"${window.theme.strings.accessibility.nextSlideMessage}","data-prev-slide":"${window.theme.strings.accessibility.prevSlideMessage}"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{bundle:e,"line-item":n.lineItem},null,8,["bundle","line-item"])])),_:2},1024)))),128))])),_:1},8,["modules","breakpoints","navigation"])]),n.bundles.length>0?((0,a.wg)(),(0,a.iD)("button",m,[(0,a.Wm)(x)])):(0,a.kq)("",!0)])])])),_:1},8,["section"])}]])}}]);
//# sourceMappingURL=9011.bundle.min.js.map?v=1733162424563
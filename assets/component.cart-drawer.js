"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2223,7645,4373,9142],{4524:function(t,e,r){r.r(e),r.d(e,{default:function(){return S}});var a=r(1797);const n={class:"cart-drawer critical-component-hide"},s={class:"container"},i=["textContent"],c=["action"],l={class:"cart-drawer__products","js-overlay":"scrollElement"},d={ref:"footer",class:"cart-drawer__footer"},o=["textContent"],u=["textContent"],m={class:"cart-drawer__actions"},p={class:"cart-drawer__disclaimer body-2"},h=["innerHTML"],y=["textContent"],g=["textContent"],_={key:0,class:"cart-drawer__partner-feature"},f=["textContent"],w={key:2,class:"cart-drawer__empty"},b=["textContent"];var v=r(8296),k=r(4097),C=r(9122),x=r(2551),$=r(2123),B=r(5946),D=r(1741),z={name:"CartDrawer",components:{ResponsiveImage:C.default,Btn:x.default,CartBundle:$.default,LineItem:B.default,PaymentIcons:D.default},props:{isActive:{type:Boolean,default:!1},payments:{type:Object,default:()=>({})},disclaimer:{type:String,default:""},partnerFeature:{type:[Object,Boolean],default:!1}},data(){return{bundles:this.$variable("productBundles"),matchingBundles:[]}},computed:{...(0,v.rn)({cart:t=>t.cart.response,cartStatus:t=>t.cart.status,settings:t=>t.index.settings}),cartItems(){if("adding"!==this.cartStatus.label)return this.cart.items;const t=[];return this.cartStatus.items.forEach((e=>{this.cart.items.find((t=>("string"==typeof e?t.key:t.id)===e))||t.push(!1)})),[...t,...this.cart.items]},itemsString(){const t=this.$string("cart.items",{pluralise:this.cart.item_count});return`${this.cart.item_count} ${t}:`},cartBundles(){return this.bundles?(this.bundles.items.forEach((t=>{this.cartItems.filter((e=>"category"===t.bundleType&&e.product_type===t.bundleCategory||"single"===t.bundleType&&e.product_id===t.parentProductId)).length>0&&this.setMatchingBundle([t])})),this.matchingBundles):this.matchingBundles}},watch:{"cart.items":function(){this.updateFocus()}},mounted(){this.updateFocus(),this.handleResize(),window.visualViewport.addEventListener("resize",(0,k.Ds)((()=>this.handleResize()),this.settings.throttle))},methods:{...(0,v.nv)({closeOverlay:"overlays/close",openOverlay:"overlays/open"}),getCartItemKey:(t,e)=>t?`cart-line-item-${t.key}`:`cart-line-item-loading-${e}`,updateFocus(){(0,a.Y3)((()=>{cnvs.EventBus.emit("overlay:update","cartDrawer"),this.handleResize()}))},shopifySectionSelect(){this.openOverlay({component:"cart-drawer",namespace:"cartDrawer",ignoreDismissed:!0})},shopifySectionDeselect(){this.closeOverlay("cartDrawer")},handleResize(){document.documentElement.style.setProperty("--cart-drawer-header-height",`${this.$refs.header.offsetHeight}px`),this.$refs.footer&&document.documentElement.style.setProperty("--cart-drawer-footer-height",`${this.$refs.footer.offsetHeight}px`)},filterMatchingBundles(){this.matchingBundles=this.matchingBundles.filter((t=>!this.cartItems.find((e=>e.product_id===t.id))))},setMatchingBundle(t){t.forEach((t=>{t.discountedProducts.forEach((e=>{e.discountedProduct.available&&(this.matchingBundles.find((t=>t.id===e.discountedProduct.id))||this.matchingBundles.push({...e.discountedProduct,swatchUrls:e.swatchUrls,discountAmount:t.discountAmount,discountType:t.discountType,discountAmountSaved:t.discountAmountSaved}))}))})),this.filterMatchingBundles()},bundleDiscount(t){var e;return(null===(e=t.properties)||void 0===e?void 0:e._buyxgety)||!1}}},S=(0,r(4407).Z)(z,[["render",function(t,e,r,v,k,C){var x;const $=(0,a.up)("cart-bundle"),B=(0,a.up)("line-item"),D=(0,a.up)("btn"),z=(0,a.up)("payment-icons"),S=(0,a.up)("responsive-image");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",s,[(0,a._)("div",{ref:"header",class:"cart-drawer__title h4",textContent:(0,a.zw)(t.$string("cart.title"))},null,8,i),C.cartBundles&&(null===(x=C.cartBundles)||void 0===x?void 0:x.length)>0?((0,a.wg)(),(0,a.j4)($,{key:0,bundles:C.cartBundles,fromMainCart:!1,onCheckCartBundle:C.cartBundles},null,8,["bundles","onCheckCartBundle"])):(0,a.kq)("",!0),t.cart.item_count>0||"adding"===t.cartStatus.label?((0,a.wg)(),(0,a.iD)("form",{key:1,class:"cart-drawer__body",action:t.$variable("routes.cart.url"),method:"post"},[(0,a._)("div",l,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(C.cartItems,((t,e)=>((0,a.wg)(),(0,a.j4)(B,{key:C.getCartItemKey(t,e),"block-class":"cart-drawer",index:e,item:t,"bundle-discount":C.bundleDiscount(t)},null,8,["index","item","bundle-discount"])))),128))]),(0,a._)("div",d,[(0,a._)("p",{class:(0,a.C_)(["cart-drawer__subtitle",{[t.$class("loading")]:0===t.cart.item_count}])},[(0,a._)("span",{class:"cart-drawer__items h6",textContent:(0,a.zw)(`${t.$string("cart.general.subtotal")}:`)},null,8,o),(0,a._)("span",{class:"cart-drawer__price h5",textContent:(0,a.zw)(t.$formatMoney(t.cart.total_price))},null,8,u)],2),(0,a._)("div",m,[(0,a.Wm)(D,{class:"cart-drawer__view-cart",modifiers:"secondary",label:t.$string("cart.view_cart"),url:t.$variable("routes.cart.url")},null,8,["label","url"]),(0,a.Wm)(D,{class:"cart-drawer__checkout",modifiers:"primary",name:"checkout",label:t.$string("cart.checkout"),type:"submit"},null,8,["label"])]),(0,a.Wm)(z,{payments:r.payments},null,8,["payments"]),(0,a._)("div",p,[r.disclaimer?((0,a.wg)(),(0,a.iD)("span",{key:0,class:"cart-drawer__disclaimer-text body-2",innerHTML:r.disclaimer},null,8,h)):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a._)("span",{class:"cart-drawer__disclaimer-text body-2",textContent:(0,a.zw)(t.$string("cart.general.shipping_at_checkout"))},null,8,y),(0,a._)("span",{class:"cart-drawer__disclaimer-text body-2",textContent:(0,a.zw)(t.$string("cart.general.currency_disclaimer",{replace:{currency:t.$variable("store.baseCurrency")}}))},null,8,g)],64))]),r.partnerFeature?((0,a.wg)(),(0,a.iD)("div",_,[r.partnerFeature.image?((0,a.wg)(),(0,a.j4)(S,{key:0,class:"cart-drawer__partner-feature-image",alt:r.partnerFeature.image.alt,image:{src:r.partnerFeature.image.src},"min-max":"73-120"},null,8,["alt","image"])):(0,a.kq)("",!0),r.partnerFeature.caption?((0,a.wg)(),(0,a.iD)("p",{key:1,class:"cart-drawer__partner-feature-caption body-2",textContent:(0,a.zw)(r.partnerFeature.caption)},null,8,f)):(0,a.kq)("",!0)])):(0,a.kq)("",!0)],512)],8,c)):((0,a.wg)(),(0,a.iD)("div",w,[(0,a._)("p",{class:"cart-drawer__empty-text text-body-m",textContent:(0,a.zw)(t.$string("cart.empty.text"))},null,8,b)]))])])}]])},1741:function(t,e,r){r.r(e),r.d(e,{default:function(){return i}});var a=r(1797);const n=["arial-label","innerHTML"];var s={name:"PaymentIcons",props:{modifiers:{type:String,default:""},payments:{type:Array,default:()=>[],required:!0}}},i=(0,r(4407).Z)(s,[["render",function(t,e,r,s,i,c){return r.payments.length?((0,a.wg)(),(0,a.iD)("ul",{key:0,class:(0,a.C_)(["payment-icons",r.modifiers])},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.payments,(t=>((0,a.wg)(),(0,a.iD)("li",{key:`payment-${t.type}`,class:"payment-icons__item","arial-label":t.type,innerHTML:t.icon},null,8,n)))),128))],2)):(0,a.kq)("",!0)}]])}}]);
//# sourceMappingURL=component.cart-drawer.js.map?v=1733162424563
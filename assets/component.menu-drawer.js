(self.webpackChunk=self.webpackChunk||[]).push([[895],{7513:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var i=n(1797);const a={ref:"menuDrawer",class:"menu-drawer__navigation"},r={class:"menu-drawer__menus"},l=["tabindex","aria-label","onClick"],s=["href","tabindex","innerHTML"],d={class:"menu-drawer__menu-item"},u=["aria-label","tabindex"],o=["tabindex","aria-label","onClick"],c=["href","tabindex","textContent"],m={class:"menu-drawer__menu-item"},h=["tabindex","aria-label","onClick"],k=["href","tabindex","textContent"];var f=n(8296),v=n(8326),g=n(7251),_=n(2262),w=n(719),b=n(1536),p=n.n(b),y=n(9579),S={name:"MenuDrawer",components:{SearchBar:v.default,IconChevronLeft:g.Z,IconChevronRight:_.Z},props:{handle:{type:String,default:"main-menu"},isActive:{type:Boolean,default:!1},itemCount:{type:Number,default:5}},data(){return{currentLink:!1,currentHeight:!1,itemRefs:[],navigation:[...Array(this.itemCount)].map(((e,t)=>({handle:`placeholder-${t}`,links:[],title:"",url:cnvs.routes.root}))),state:"loading"}},computed:{...(0,f.Se)({getFirstElement:"accessibility/getFirstElement",getActiveOverlay:"overlays/getActiveOverlay"}),...(0,f.rn)({isMobile:e=>e.index.screen.mobile}),currentItemRefs(){return this.currentLink?this.itemRefs.filter((e=>e.handle===this.currentLink.handle)):this.itemRefs.filter((e=>1===e.tier))},currentTier(){return this.currentLink?this.currentLink.tier+1:1}},watch:{currentLink(){this.updateFocus(),this.updateHeight()},getActiveOverlay(){this.currentLink=!1},isMobile(){this.isMobile||this.closeOverlay("menuDrawer")}},async mounted(){const e=performance.now();await this.queryMenu(),this.removeStaticMenu(),this.updateFocus();const t=performance.now(),n=Math.abs(w.Z.normal-(t-e));setTimeout((()=>{this.updateHeight()}),n)},beforeUpdate(){this.itemRefs=[]},methods:{...(0,f.nv)({clearFocusTrap:"accessibility/clearFocusTrap",closeOverlay:"overlays/close",setFocusTrap:"accessibility/setFocusTrap"}),getTier1LinkText(e,t){return"loading"===this.state?`<span class="menu-drawer__loading" style="animation-delay:  ${t*w.Z.quick/1e3}s"></span>`:e.title},getActiveState(e){return this.isActive&&e.handle===this.currentLink.handle},getChildActiveState(e){const t=e.links.find((e=>e.handle===this.currentLink.handle));return Boolean(t)},setItemRefs(e,t){e&&this.itemRefs.push({...t,element:e})},async queryMenu(){return new Promise((async(e,t)=>{if(this.handle)try{const t=await cnvs.Query({locale:cnvs.store.language,query:p(),variables:{handle:this.handle}});if(cnvs.settings.disableComponentReadyState)return void e();this.navigation=(0,y.HZ)({response:t}),this.state="ready",e()}catch(e){t(),reportError("Failed to load menu",e)}else e()}))},removeStaticMenu(){const e=document.querySelector('[js-menu-drawer="container"]');e&&e.remove()},updateFocus(){(0,i.Y3)((()=>{cnvs.EventBus.emit("overlay:update","menuDrawer")}))},updateHeight(){(0,i.Y3)((()=>{const e=this.currentItemRefs.reduce(((e,t)=>("number"==typeof e?e:e.element.offsetHeight)+t.element.offsetHeight),0);0===e&&this.currentItemRefs.length&&setTimeout((()=>{this.updateHeight()}),100),document.documentElement.style.setProperty("--menu-drawer-links-height",`${e}px`),this.currentHeight=e}))},handleLinkClick(e){this.currentLink=e}}},x=(0,n(4407).Z)(S,[["render",function(e,t,n,f,v,g){const _=(0,i.up)("search-bar"),w=(0,i.up)("icon-chevron-right"),b=(0,i.up)("icon-chevron-left");return(0,i.wg)(),(0,i.iD)("div",{class:(0,i.C_)(["menu-drawer critical-component-hide",[`show-tier${g.currentTier}`,{[e.$class("loading")]:"loading"===v.state}]])},[(0,i._)("div",a,[(0,i.Wm)(_),(0,i._)("nav",r,[(0,i._)("ul",{class:(0,i.C_)(["menu-drawer__menu menu-drawer__tier1",{"is-active":g.getActiveState(!1)}])},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(v.navigation,((n,a)=>((0,i.wg)(),(0,i.iD)("li",{ref_for:!0,ref:e=>g.setItemRefs(e,{tier:1,type:"link"}),key:n.handle,class:"menu-drawer__menu-item"},[n.links.length?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"menu-drawer__link menu-drawer__button text-body-m text-heading-l-desktop",tabindex:g.getActiveState(!1)?0:-1,"aria-label":`${e.$string("accessibility.open")} ${n.title}`,onClick:e=>g.handleLinkClick(n)},[(0,i.Uk)((0,i.zw)(n.title)+" ",1),(0,i.Wm)(w)],8,l)):((0,i.wg)(),(0,i.iD)("a",{key:1,class:"menu-drawer__link text-body-m text-heading-l-desktop",href:n.url,tabindex:g.getActiveState(!1)?0:-1,innerHTML:g.getTier1LinkText(n,a)},null,8,s)),n.links.length?((0,i.wg)(),(0,i.iD)("ul",{key:2,class:(0,i.C_)(["menu-drawer__menu menu-drawer__tier2",{"is-active":g.getActiveState(n)||g.getChildActiveState(n)}])},[(0,i._)("li",d,[(0,i._)("button",{ref_for:!0,ref:e=>g.setItemRefs(e,{handle:n.handle,tier:2,type:"back"}),class:"menu-drawer__link menu-drawer__button menu-drawer__back text-heading-l","aria-label":`${e.$string("general.menu_drawer.back_to")} ${e.$string("general.menu_drawer.top_level")}`,tabindex:g.getActiveState(n)?0:-1,onClick:t[0]||(t[0]=e=>g.handleLinkClick(!1))},[(0,i.Wm)(b),(0,i.Uk)(" "+(0,i.zw)(n.title),1)],8,u)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.links,(t=>((0,i.wg)(),(0,i.iD)("li",{ref_for:!0,ref:e=>g.setItemRefs(e,{handle:n.handle,tier:2,type:"link"}),key:t.handle,class:"menu-drawer__menu-item"},[t.links.length?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"menu-drawer__link menu-drawer__button text-body-m text-heading-l-desktop",tabindex:g.getActiveState(n)?0:-1,"aria-label":`${e.$string("accessibility.open")} ${t.title}`,onClick:e=>g.handleLinkClick(t)},[(0,i.Uk)((0,i.zw)(t.title)+" ",1),(0,i.Wm)(w)],8,o)):((0,i.wg)(),(0,i.iD)("a",{key:1,class:"menu-drawer__link text-body-m text-heading-l-desktop",href:t.url,tabindex:g.getActiveState(n)?0:-1,textContent:(0,i.zw)(t.title)},null,8,c)),t.links.length?((0,i.wg)(),(0,i.iD)("ul",{key:2,class:(0,i.C_)(["menu-drawer__menu menu-drawer__tier3",{"is-active":g.getActiveState(t)}])},[(0,i._)("li",m,[(0,i._)("button",{ref_for:!0,ref:e=>g.setItemRefs(e,{handle:t.handle,tier:3,type:"back"}),class:"menu-drawer__link menu-drawer__button menu-drawer__back h3",tabindex:g.getActiveState(t)?0:-1,"aria-label":`${e.$string("general.menu_drawer.back_to")} ${t.title}`,onClick:e=>g.handleLinkClick(n)},[(0,i.Wm)(b),(0,i.Uk)(" "+(0,i.zw)(t.title),1)],8,h)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.links,(e=>((0,i.wg)(),(0,i.iD)("li",{ref_for:!0,ref:e=>g.setItemRefs(e,{handle:t.handle,tier:3,type:"link"}),key:e.handle,class:"menu-drawer__menu-item"},[(0,i._)("a",{class:"menu-drawer__link text-body-m text-heading-l-desktop",href:e.url,tabindex:g.getActiveState(t)?0:-1,textContent:(0,i.zw)(e.title)},null,8,k)])))),128))],2)):(0,i.kq)("",!0)])))),128))],2)):(0,i.kq)("",!0)])))),128))],2)])],512)],2)}]])},1536:function(e){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"menu"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"handle"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"menu"},arguments:[{kind:"Argument",name:{kind:"Name",value:"handle"},value:{kind:"Variable",name:{kind:"Name",value:"handle"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:207}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}t.loc.source={body:"query menu($handle: String!) {\n  menu(handle: $handle) {\n    items {\n      title\n      url\n      items {\n        title\n        url\n        items {\n          title\n          url\n        }\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}t.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}})),e.exports=t,e.exports.menu=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i.menu||new Set,l=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var d=s;s=new Set,d.forEach((function(e){l.has(e)||(l.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return l.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(t,"menu")}}]);
//# sourceMappingURL=component.menu-drawer.js.map?v=1733162424563
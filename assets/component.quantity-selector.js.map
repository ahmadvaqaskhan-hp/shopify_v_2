{"version":3,"file":"component.quantity-selector.js?v=1733162424563","mappings":"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","sources":["webpack:///../../../../../src/components/async/quantity-selector/quantity-selector.vue","webpack:///../../../../../src/components/async/quantity-selector/quantity-selector.vue?898c"],"sourcesContent":["<template>\n  <div\n    class=\"quantity-selector\"\n    :class=\"[\n      $blockClass(blockClass, 'quantity-selector'),\n      {\n        'quantity-selector--large': large,\n        [$class('error')]: state === 'error',\n      },\n    ]\"\n  >\n    <div\n      class=\"quantity-selector__control quantity-selector__control--button\"\n      :class=\"$blockClass(blockClass, 'quantity-control')\"\n    >\n      <button\n        class=\"quantity-selector__button\"\n        :class=\"[\n          $blockClass(blockClass, 'quantity-button'),\n          { [$class('disabled')]: disableDecrease },\n        ]\"\n        type=\"button\"\n        :disabled=\"disableDecrease\"\n        :aria-label=\"$string('cart.line_item.decrease_quantity')\"\n        @click=\"handleQuantityUpdate('decrease')\"\n      >\n        <icon-minus />\n      </button>\n    </div>\n\n    <div\n      class=\"quantity-selector__control quantity-selector__control--input\"\n      :class=\"$blockClass(blockClass, 'quantity-control')\"\n    >\n      <input\n        class=\"quantity-selector__input\"\n        :class=\"$blockClass(blockClass, 'quantity-input')\"\n        :name=\"name\"\n        pattern=\"[0-9]*\"\n        readonly\n        tabindex=\"-1\"\n        type=\"number\"\n        :value=\"quantity\"\n        :aria-label=\"$string('cart.line_item.quantity')\"\n      >\n    </div>\n\n    <div\n      class=\"quantity-selector__control quantity-selector__control--button\"\n      :class=\"$blockClass(blockClass, 'quantity-control')\"\n    >\n      <button\n        class=\"quantity-selector__button\"\n        :class=\"[\n          $blockClass(blockClass, 'quantity-button'),\n          { [$class('disabled')]: disableIncrease },\n        ]\"\n        :disabled=\"disableIncrease\"\n        type=\"button\"\n        :aria-label=\"$string('cart.line_item.increase_quantity')\"\n        @click=\"handleQuantityUpdate('increase')\"\n      >\n        <icon-plus />\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\n\n/**\n * Vue: Quantity selector\n * -----------------------------------------------------------------------------\n * Base template and functionality for quantity selector.\n * - Used in product form and line item.\n * - Responsible for emitting events to update quantity, parent components must\n *   action the update.\n *\n * @param {String} [blockClass] - Block level class to apply to all elements.\n * @param {Boolean} [large] - Large styles.\n * @param {Object} [item] - Line item object.\n * @param {Number} quantity - Actual line item quantity selector value as\n * reflected in Shopify's data.\n * @param {String} [state] - Parent component state.\n *\n */\nimport IconMinus from '~icons/misc/minus.svg'\nimport IconPlus from '~icons/misc/plus.svg'\n\nexport default {\n  name: 'QuantitySelector',\n\n  components: {\n    IconMinus,\n    IconPlus,\n  },\n\n  props: {\n    blockClass: {\n      type: String,\n      default: '',\n    },\n    large: {\n      type: Boolean,\n      default: false,\n    },\n    item: {\n      type: [Boolean, Object],\n      default: false,\n    },\n    quantity: {\n      type: Number,\n      default: 1,\n      required: true,\n    },\n    state: {\n      type: String,\n      default: 'loading',\n    },\n  },\n\n  emits: ['update-quantity'],\n\n  data() {\n    return {\n      localQuantity: 1,\n    }\n  },\n\n  computed: {\n\n    /**\n     * Compute unavailable.\n     * - If object has avaiable = false and no quantity, means it's unavailable\n     *   on the product page.\n     * @returns {Boolean}\n     */\n    unavailable() {\n      if (!this.item) {\n        return false\n      }\n\n      return (this.item.available === false && !this.item.quantity)\n    },\n\n    /**\n     * Compute if inventory is limited\n     */\n    limited() {\n      if (!cnvs.settings.quantityLimits.enable) {\n        return false\n      }\n\n      if (!this.item || !this.item.tags) {\n        return false\n      }\n\n      const tag = this.item.tags.find(tag => tag.includes('limit:'))\n\n      if (!tag) {\n        return cnvs.settings.quantityLimits.storeLimit <= this.localQuantity\n      }\n\n      const limit = tag.split(':').slice(-1)[0]\n\n      if (limit.toLowerCase() === 'none') {\n        return false\n      }\n\n      return limit <= this.localQuantity\n    },\n\n    /**\n     * Compute if decrease button should be disabled.\n     * @return {Boolean}\n     */\n    disableDecrease() {\n      return (\n        this.unavailable ||\n        this.state === 'updating' ||\n        this.state === 'loading' ||\n        this.localQuantity === 1\n      )\n    },\n\n    /**\n     * Compute if increase button should be disabled.\n     * @return {Boolean}\n     */\n    disableIncrease() {\n      const outOfInventory = (\n        this.item.inventory_management === 'shopify' &&\n        this.item.inventory_policy === 'deny' &&\n        this.quantity >= this.inventory\n      )\n\n      return (\n        this.unavailable ||\n        this.limited ||\n        this.state === 'updating' ||\n        this.state === 'loading' ||\n        outOfInventory\n      )\n    },\n\n    /**\n     * Compute inventory.\n     * - Returns 0 if no limit.\n     * @returns {Number}\n     */\n    inventory() {\n      return this.item?.inventory_quantity || 0\n    },\n\n    /**\n     * Compute input name.\n     * @return {String}\n     */\n    name() {\n      if (this.item?.key) {\n        return 'updates[]'\n      }\n\n      return 'quantity'\n    },\n  },\n\n  watch: {\n\n    /**\n     * Watch actual quantity to update local quantity.\n     */\n    quantity() {\n      this.localQuantity = this.quantity\n    },\n  },\n\n  mounted() {\n    this.localQuantity = this.quantity || 1\n  },\n\n  methods: {\n\n    /**\n     * Handle quantity selector update.\n     * - Buttons only update local quantity which emits an event.\n     * - If the event is successful then the quantity prop is updated and this\n     *   is used for front-end display.\n     * @param {String} type - `decrease` or `increase`.\n     */\n    handleQuantityUpdate(type) {\n      if (\n        this.state === 'updating' ||\n        (type === 'decrease' && this.disableDecrease) ||\n        (type === 'increase' && this.disableIncrease)\n      ) {\n        return\n      }\n\n      if (type === 'decrease') {\n        this.localQuantity--\n      } else {\n        this.localQuantity++\n      }\n\n      this.$emit('update-quantity', this.localQuantity)\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\">\n@import './quantity-selector';\n</style>\n","import { render } from \"./quantity-selector.vue?vue&type=template&id=170a5345\"\nimport script from \"./quantity-selector.vue?vue&type=script&lang=js\"\nexport * from \"./quantity-selector.vue?vue&type=script&lang=js\"\n\nimport \"./quantity-selector.vue?vue&type=style&index=0&id=170a5345&lang=scss\"\n\nimport exportComponent from \"/buddy/hyperx-canvas-1/node_modules/@we-make-websites/basis/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["name","components","IconMinus","IconPlus","props","blockClass","type","String","default","large","Boolean","item","Object","quantity","Number","required","state","emits","data","localQuantity","computed","unavailable","this","available","limited","cnvs","settings","quantityLimits","enable","tags","tag","find","includes","storeLimit","limit","split","slice","toLowerCase","disableDecrease","disableIncrease","outOfInventory","inventory_management","inventory_policy","inventory","inventory_quantity","key","watch","mounted","methods","handleQuantityUpdate","$emit","_createElementBlock","class","_ctx","$props","_createElementVNode","$options","disabled","onClick","_createVNode","_component_icon_minus","pattern","readonly","tabindex","value","_component_icon_plus"],"sourceRoot":""}
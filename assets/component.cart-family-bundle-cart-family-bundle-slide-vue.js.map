{"version":3,"file":"component.cart-family-bundle-cart-family-bundle-slide-vue.js?v=1733162424563","mappings":"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","sources":["webpack:///../../../../../src/components/async/cart-family-bundle/cart-family-bundle-slide.vue","webpack:///../../../../../src/components/async/cart-family-bundle/cart-family-bundle-slide.vue?d16c"],"sourcesContent":["<template>\n  <div class=\"cart-family-bundle__line-item-wrapper\">\n    <a\n      class=\"ajax-cart__image responsive-image__wrapper knockout-image\"\n      :href=\"`/${bundle.handle}`\"\n    >\n      <img\n        :alt=\"variant.title\"\n        sizes=\"auto\"\n        :src=\"getImageUrl(getVariantImage, '50x')\"\n        :srcset=\"`\n          ${getImageUrl(getVariantImage, '120x')} 120w,\n          ${getImageUrl(getVariantImage, '240x')} 240w,\n          ${getImageUrl(getVariantImage, '320x')} 320w\n        `\"\n      >\n    </a>\n\n    <div class=\"cart-family-bundle__description\">\n      <div class=\"cart-family-bundle__inner\">\n        <a\n          class=\"cart-family-bundle__title subtitle-2\"\n          :href=\"`/${bundle.handle}`\"\n          v-text=\"bundle.title\"\n        />\n\n        <span\n          class=\"cart-family-bundle__variant-title\"\n          v-text=\"variant.title\"\n        />\n\n        <product-price-message\n          v-if=\"hasPricingMessage\"\n          :lowest-price=\"lowestPrice\"\n          :recommended-price=\"recommendedPrice\"\n        />\n        <div class=\"ajax-cart__price body-2\">\n          <span\n            class=\"visually-hidden\"\n            v-text=\"$string('cart.label.original_price')\"\n          />\n\n          <span\n            class=\"ajax-cart__price-current\"\n            :class=\"{'sale': recommendedPrice}\"\n            v-text=\"$formatMoney(variant.price.amount)\"\n          />\n          <span\n            v-if=\"getPercentText\"\n            class=\"badge badge--primary\"\n            v-text=\"getPercentText\"\n          />\n        </div>\n      </div>\n\n      <button\n        class=\"cart-family-bundle__add text-link\"\n        tabindex=\"0\"\n        :data-cart-add=\"variant.id\"\n        @click.prevent=\"handleAddToCart(bundle)\"\n      >\n        <span v-text=\"`+ ${$string('product_family_bundles.cart.cta')}`\" />\n        <span\n          class=\"is-hidden\"\n          v-text=\"$string('product.cta.add_to_cart_limit')\"\n        />\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\n\n/**\n * Vue: Cart Family Bundle Slide (cart-family-bundle-slide)\n * -----------------------------------------------------------------------------\n * Cart family bundle slide with swap function\n *\n */\n\nimport { getSizedImageUrl } from '~/helpers/format'\nimport { mapActions } from 'vuex'\nimport timings from '~/config/timings'\nimport ProductPriceMessage from '~global/product-price-message/product-price-message'\n\nexport default {\n  name: 'CartFamilyBundleSlide',\n\n  components: {\n    ProductPriceMessage\n  },\n\n  props: {\n    bundle: {\n      type: Object,\n      default: () => ({}),\n    },\n    lineItem: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n\n  data() {\n    return {\n      selectedVariant: this.bundle.variants[0]?.id || null,\n    }\n  },\n\n  computed: {\n\n    /**\n     * Get variant from product bundle that matches line item variant.\n     * @returns {Object}\n     */\n    variant() {\n      console.log('getVariant family lineItem ====>>>', this.lineItem)\n      console.log('this.lineItem.variant =>', this.lineItem.variant)\n      const variantAvailable = this.bundle.variants.find((bundleVariant) => {\n        return bundleVariant.available === true &&\n          this.lineItem.variant_title.toLowerCase() === bundleVariant.title.toLowerCase()\n      })\n\n      console.log('variantAvailable', variantAvailable)\n\n      return variantAvailable || this.bundle.variants[0]\n    },\n\n    /**\n     * Get variant image\n     */\n    getVariantImage() {\n      const variantImage = this.bundle.images.find((image) => {\n        return image.id === this.variant.image\n      }) || this.bundle.featuredImage\n\n      return variantImage.src\n    },\n\n    /**\n     * Get product lowest price.\n     * @returns {Number}\n     */\n    lowestPrice() {\n      if (!this.variant?.lowestPrice) {\n        return false\n      }\n\n      const sanitizedLowestPrice = this.variant.lowestPrice\n        .replace(/_DELETE_/g, '')\n\n      return sanitizedLowestPrice.length > 0\n        ? sanitizedLowestPrice\n        : false\n    },\n\n    /**\n     * Get product recommended price.\n     * @returns {Number}\n     */\n    recommendedPrice() {\n      return this.variant.compareAtPrice.amount > this.variant.price.amount\n        ? this.$formatMoney(this.variant.compareAtPrice.amount)\n        : false\n    },\n\n    /**\n     * Get percentage discount text.\n     * @returns {String}\n     */\n     getPercentText() {\n      const { compareAtPrice, price } = this.variant\n      if (!compareAtPrice.amount || compareAtPrice.amount <= price.amount) {\n        return false\n      }\n\n      const discountPercentage = 100 - Math.floor(((price.amount / compareAtPrice.amount) * 100));\n      if (discountPercentage <= 0) {\n        return false\n      }\n\n      const saleText = this.$string('layout.general.sale').replace('{{amount}}', discountPercentage)\n      return saleText\n    },\n\n    /**\n     * Get price message\n     * @returns {String}\n     */\n    hasPricingMessage() {\n      const enabled = this.$variable('settings.pricingDirective.enable')\n\n      if (!enabled) {\n        return false\n      }\n\n      return enabled\n    },\n  },\n\n  mounted() {\n    console.log('cart family-bundle mount--->', this.bundle)\n  },\n\n  methods: {\n\n    /**\n     * Map Vuex actions.\n     */\n    ...mapActions({\n      addItem: 'cart/addItem',\n    }),\n\n    /**\n     * Handle add to cart submission.\n     */\n    async handleAddToCart() {\n      clearTimeout(this.timeout)\n      const properties = {}\n      this.error = ''\n      this.state = 'adding'\n      cnvs.EventBus.emit('family-bundle-updating')\n\n      if (cnvs.storybook) {\n        this.timeout = setTimeout(() => {\n          this.state = 'added'\n        }, timings.slow)\n\n        this.timeout = setTimeout(() => {\n          this.state = 'ready'\n        }, timings.message)\n\n        return\n      }\n\n      properties._undoProperties = this.lineItem.properties\n      properties._undoProperties._undoId = this.lineItem.id\n      properties._lowestPrice = this.variant.lowestPrice\n      properties._recommendedPrice = this.variant.compareAtPrice\n\n      const items = [\n        {\n          id: this.variant.id,\n          properties,\n          quantity: this.lineItem.quantity,\n        },\n      ]\n\n      try {\n        await this.addItem(items)\n\n        this.state = 'added'\n\n        cnvs.EventBus.emit('family-bundle-remove', {key: this.lineItem.key})\n\n        this.timeout = setTimeout(() => {\n          this.state = 'ready'\n        }, timings.message)\n\n      } catch (error) {\n        this.state = 'error'\n\n        if (error.length) {\n          this.error = error\n          return\n        }\n\n        reportError('Failed to add product to cart', error)\n      }\n    },\n\n    /**\n     *\n     * @param {String} src - variant image src\n     * @param {String} size - size for image\n     * @returns {String}\n     */\n    getImageUrl(src, size) {\n      return getSizedImageUrl(src, size)\n    },\n  },\n}\n</script>\n","import { render } from \"./cart-family-bundle-slide.vue?vue&type=template&id=08b5c70e\"\nimport script from \"./cart-family-bundle-slide.vue?vue&type=script&lang=js\"\nexport * from \"./cart-family-bundle-slide.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/buddy/hyperx-canvas-1/node_modules/@we-make-websites/basis/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","name","components","ProductPriceMessage","props","bundle","type","Object","default","lineItem","data","selectedVariant","this","variants","id","computed","variant","console","log","variantAvailable","find","bundleVariant","available","variant_title","toLowerCase","title","getVariantImage","images","image","featuredImage","src","lowestPrice","sanitizedLowestPrice","replace","length","recommendedPrice","compareAtPrice","amount","price","$formatMoney","getPercentText","discountPercentage","Math","floor","$string","hasPricingMessage","$variable","mounted","methods","mapActions","addItem","async","clearTimeout","timeout","properties","error","state","cnvs","EventBus","emit","storybook","setTimeout","timings","_undoProperties","_undoId","_lowestPrice","_recommendedPrice","items","quantity","key","reportError","getImageUrl","size","getSizedImageUrl","_createElementBlock","_createElementVNode","href","$props","handle","alt","$options","sizes","srcset","_toDisplayString","_createBlock","_component_product_price_message","_ctx","tabindex","onClick"],"sourceRoot":""}
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8847],{5838:function(e,s,t){t.r(s),t.d(s,{default:function(){return c}});var o=t(1797),r=t(8296),d=t(855),n={name:"CustomersAddresses",data:()=>({formId:"",nodeSelectors:!1}),watch:{formId(){if(!this.nodeSelectors)return;this.nodeSelectors.container.addresses.classList.toggle(this.$class("hidden")),this.nodeSelectors.container.form.classList.toggle(this.$class("hidden")),this.nodeSelectors.forms.forEach((e=>{e.classList.add(this.$class("hidden"))}));const e=this.getForm(this.formId);e&&(e.classList.remove(this.$class("hidden")),this.setFocus())}},mounted(){this.setNodeSelectors(),this.nodeSelectors.container.addresses&&(this.setEventListeners(),this.updateCheckboxesClass(),this.updateSelectValue("country"),setTimeout((()=>{this.updateSelectValue("province")}),0),this.checkErrors())},methods:{...(0,r.nv)({closeOverlay:"overlays/close",openOverlay:"overlays/open"}),setNodeSelectors(){this.nodeSelectors={actions:{add:document.querySelector('[js-addresses="add"]'),back:[...document.querySelectorAll('[js-addresses="back"]')],delete:[...document.querySelectorAll('[js-addresses="delete"]')],deleteCancel:document.querySelector('[js-addresses="deleteCancel"]'),deleteConfirm:document.querySelector('[js-addresses="deleteConfirm"]'),edit:[...document.querySelectorAll('[js-addresses="edit"]')],quickDefault:[...document.querySelectorAll('[js-addresses="quickDefault"]')]},container:{addresses:document.querySelector('[js-addresses="addressesContainer"]'),form:document.querySelector('[js-addresses="formContainer"]')},error:document.querySelector('[js-addresses="error"]'),forms:[...document.querySelectorAll('[js-addresses="forms"]')],input:{checkbox:[...document.querySelectorAll('[js-addresses="checkbox"]')],country:[...document.querySelectorAll('[js-addresses="country"]')],province:[...document.querySelectorAll('[js-addresses="province"]')]}}},setEventListeners(){this.nodeSelectors.actions.add.addEventListener("click",(()=>{this.formId="new"})),this.nodeSelectors.actions.edit.forEach((e=>{e.addEventListener("click",(()=>{this.formId=e.dataset.formId}))})),this.nodeSelectors.actions.back.forEach((e=>{e.addEventListener("click",(()=>{this.formId="",sessionStorage.removeItem("addressSubmit")}))})),this.nodeSelectors.actions.quickDefault.forEach((e=>{e.addEventListener("change",(()=>{this.handleQuickDefaultChange(e.dataset.formId)}))})),this.nodeSelectors.input.country.forEach((e=>{e.addEventListener("change",(()=>{this.handleCountryChange(e)}))})),this.nodeSelectors.forms.forEach((e=>{e.addEventListener("submit",(()=>{sessionStorage.setItem("addressSubmit",!0)}))})),this.nodeSelectors.actions.delete.forEach((e=>{e.addEventListener("click",(()=>{this.handleDeleteClick(e.dataset.formId)}))})),this.nodeSelectors.actions.deleteCancel.addEventListener("click",(()=>{this.handleDeleteCancel()})),this.nodeSelectors.actions.deleteConfirm.addEventListener("click",(()=>{this.handleDeleteConfirm()}))},setFocus(){const e=this.formId?"form":"addresses",s=(0,d.K)(this.nodeSelectors.container[e]);s.length&&s[0].focus()},updateCheckboxesClass(){this.nodeSelectors.input.checkbox.forEach((e=>{e.classList.add("checkbox__input")}))},updateSelectValue(e){this.nodeSelectors.input[e].forEach((e=>{if(!e.dataset.default)return;const s=[...e.options].findIndex((s=>s.innerText.trim()===e.dataset.default||s.value===e.dataset.default));s<0||(e.options[s].selected=!0,e.dispatchEvent(new Event("change")))}))},getForm(e){return this.nodeSelectors.forms.find((s=>s.dataset.formId==e))},checkErrors(){this.nodeSelectors.error?sessionStorage.getItem("addressSubmit")&&(this.formId=this.nodeSelectors.error.dataset.formId):sessionStorage.removeItem("addressSubmit")},handleQuickDefaultChange(e){const s=this.getForm(e);s.querySelector('[js-addresses="checkbox"]').checked=!0,s.submit()},handleCountryChange(e){const s=this.getForm(e.dataset.formId);if(!s)return;const t=e[e.selectedIndex],o=JSON.parse(t.dataset.provinces),r=s.querySelector('[js-addresses="provinceContainer"]'),d=s.querySelector('[js-addresses="province"]');if(d.value="",d.innerHTML="",!o.length)return void r.classList.add(this.$class("hidden"));const n=o.map((e=>`<option value="${e[0]}">${e[1]}</option>`)).join("");d.innerHTML=n,r.classList.remove(this.$class("hidden"))},handleDeleteClick(e){this.nodeSelectors.actions.deleteConfirm.dataset.formId=e,this.openOverlay({ignoreDismissed:!0,namespace:"deleteAddress"})},handleDeleteCancel(){this.nodeSelectors.actions.deleteConfirm.dataset.formId="",this.closeOverlay("deleteAddress")},handleDeleteConfirm(){const e=this.nodeSelectors.actions.deleteConfirm.dataset.formId;Shopify.postLink(`/account/addresses/${e}`,{parameters:{_method:"delete"}})}}},c=(0,t(4407).Z)(n,[["render",function(e,s,t,r,d,n){return(0,o.wg)(),(0,o.iD)("div")}]])}}]);
//# sourceMappingURL=component.customers-addresses.js.map?v=1733162424563
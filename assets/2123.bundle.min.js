"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2123,7480],{1472:function(e,t,n){n.r(t),n.d(t,{default:function(){return V}});var a=n(1797);const r={class:"cart-bundle__line-item-wrapper"},i=["href"],s=["alt","src","srcset"],l={class:"cart-bundle__description"},d={class:"cart-bundle__inner"},o=["href","textContent"],c={class:"cart-bundle__variant-title"},u={class:"ajax-cart__price body-2"},p=["textContent"],b=["textContent"],w=["textContent"],_=["textContent"],g=["textContent"],m={class:"cart-bundle__swatches"},h=["title","onClick"],v=["alt","src"],C=["textContent"],x=["data-cart-add"],f=["textContent"],k=["textContent"];var y=n(9579),$=n(8296),S=n(719),D={name:"CartBundleSlide",props:{bundle:{type:Object,default:()=>({})}},data(){var e;return{selectedVariant:(null===(e=this.bundle.variants[0])||void 0===e?void 0:e.id)||null}},computed:{discountText(){return"percentage"===this.bundle.discountType?this.getPercentText(this.bundle.discountAmount):"amount"===this.bundle.discountType?this.getPercentTextNew(this.$formatMoney(100*this.bundle.discountAmountSaved)):""},strikeOutPrice(){return null===this.getVariant(this.bundle).compare_at_price?this.getVariant(this.bundle).price:this.getVariant(this.bundle).compare_at_price}},methods:{...(0,$.nv)({addItem:"cart/addItem"}),async handleAddToCart(e){const t=this.getVariant(e);if(!e||!t)return;if(clearTimeout(this.timeout),this.error="",this.state="adding",cnvs.storybook)return this.timeout=setTimeout((()=>{this.state="added"}),S.Z.slow),void(this.timeout=setTimeout((()=>{this.state="ready"}),S.Z.message));const n=[{id:t.id,properties:{_bundleAddOn:!0},quantity:1}];try{await this.addItem(n),this.state="added",this.timeout=setTimeout((()=>{this.state="ready",this.$emit("check-cart-bundle"),this.$emit("collapse-accordion")}),S.Z.message)}catch(e){if(this.state="error",e.length)return void(this.error=e);reportError("Failed to add product to cart",e)}},getDiscountPrice(e){const t=this.getVariant(e);let n;if(n=null===t.compare_at_price?t.price:t.compare_at_price,"percentage"===e.discountType){const t=n*(e.discountAmount/100);return Math.round(n-t)}return n-100*e.discountAmountSaved},getPercentText(e){return this.$string("product_bundles.percent_off").replace("{{amount}}",e)},getPercentTextNew(e){return this.$string("product_bundles.amount_off").replace("{{amount}}",e)},getVariant(e){let t=e.variants.find((e=>e.id===this.selectedVariant&&!0===e.available));return t||(t=e.variants[0],this.selectedVariant=t.id),t},getImageUrl:(e,t)=>(0,y.M0)(e,t),swatchUrl(e,t){const n=t.options[0].toLowerCase();return e.swatchUrls[n]},hasColorSwatch:e=>"color"===e.options[0].toLowerCase()}},V=(0,n(4407).Z)(D,[["render",function(e,t,n,y,$,S){return(0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("a",{class:"ajax-cart__image responsive-image__wrapper knockout-image",href:`/products/${n.bundle.handle}`},[(0,a._)("img",{alt:S.getVariant(n.bundle).title,sizes:"auto",src:S.getImageUrl(S.getVariant(n.bundle).featured_image.src,"50x"),srcset:`\n          ${S.getImageUrl(S.getVariant(n.bundle).featured_image.src,"120x")} 120w,\n          ${S.getImageUrl(S.getVariant(n.bundle).featured_image.src,"240x")} 240w,\n          ${S.getImageUrl(S.getVariant(n.bundle).featured_image.src,"320x")} 320w\n        `},null,8,s)],8,i),(0,a._)("div",l,[(0,a._)("div",d,[(0,a._)("a",{class:"cart-bundle__title subtitle-2",href:`/products/${n.bundle.handle}`,textContent:(0,a.zw)(n.bundle.title)},null,8,o),(0,a._)("div",c,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.bundle.options,((e,t)=>((0,a.wg)(),(0,a.iD)("span",{key:`bundle-options-${t}`},["title"!==e.toLowerCase()?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)((0,a.zw)(e)+": "+(0,a.zw)(S.getVariant(n.bundle).options[t]),1)],64)):(0,a.kq)("",!0)])))),128))]),(0,a._)("div",u,[(0,a._)("span",{class:"visually-hidden",textContent:(0,a.zw)(e.$string("cart.label.original_price"))},null,8,p),(0,a._)("s",{textContent:(0,a.zw)(e.$formatMoney(S.strikeOutPrice))},null,8,b),(0,a._)("span",{class:"visually-hidden",textContent:(0,a.zw)(e.$string("cart.label.discounted_price"))},null,8,w),(0,a._)("span",{class:"ajax-cart__price-current",textContent:(0,a.zw)(e.$formatMoney(S.getDiscountPrice(n.bundle)))},null,8,_),(0,a._)("span",{class:"badge badge--primary",textContent:(0,a.zw)(S.discountText)},null,8,g)]),(0,a._)("div",m,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.bundle.variants,(e=>((0,a.wg)(),(0,a.iD)(a.HY,{key:e.sku},[e.available?((0,a.wg)(),(0,a.iD)("button",{key:0,class:(0,a.C_)(["product-card-swatches__swatch",["product-card-swatches__swatch--"+(S.hasColorSwatch(n.bundle)?"color":"size"),{"is-active":$.selectedVariant===e.id}]]),title:e.public_title,type:"button",onClick:t=>$.selectedVariant=e.id},[S.hasColorSwatch(n.bundle)?((0,a.wg)(),(0,a.iD)("img",{key:0,alt:e.public_title,class:"product-card-swatches__image",src:S.swatchUrl(n.bundle,e)},null,8,v)):((0,a.wg)(),(0,a.iD)("span",{key:1,textContent:(0,a.zw)(e.public_title)},null,8,C))],10,h)):(0,a.kq)("",!0)],64)))),128))]),(0,a._)("button",{class:"cart-bundle__add",tabindex:"0","data-cart-add":S.getVariant(n.bundle).id,onClick:t[0]||(t[0]=(0,a.iM)((e=>S.handleAddToCart(n.bundle)),["prevent"]))},[(0,a._)("span",{textContent:(0,a.zw)(e.$string("product.cta.add_to_bag"))},null,8,f),(0,a._)("span",{class:"is-hidden",textContent:(0,a.zw)(e.$string("product.cta.add_to_cart_limit"))},null,8,k)],8,x)])])])}]])},2123:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var a=n(1797);const r={class:"cart-bundle__control accordion__control subtitle-1","aria-controls":"bundleCartDrawerContent","aria-expanded":"false"},i={class:"cart-bundle__heading"},s=["textContent"],l=["textContent"],d={class:"cart-bundle__cta"},o=["textContent"],c={class:"cart-bundle__cta--chevron"},u={id:"bundleCartDrawerContent",class:"cart-bundle__container",role:"region","aria-labelledby":"bundleCartDrawerAccordion1"},p={class:"js-cart-bundle-swiper-button swiper-button-prev swiper-button-custom","js-cart-bundle-carousel":"prev"},b={id:"BundleCartCarousel-0",class:"cart-bundle__carousel"},w={class:"js-cart-bundle-swiper-button swiper-button-next swiper-button-custom","js-cart-bundle-carousel":"next"},_={key:1,class:"cart-bundle--main-cart-desktop col xs12 l10 offset-l1"},g={class:"cart-bundle__heading--desktop"},m={key:0,class:"cart-bundle__title--desktop h5"},h=["textContent"],v={class:"cart-bundle__navigation"},C={ref:"swiperPrev",class:"js-cart-bundle-swiper-button swiper-button-prev swiper-button-custom","js-product-carousel":"prev"},x={ref:"swiperNext",class:"js-cart-bundle-swiper-button swiper-button-next swiper-button-custom","js-product-carousel":"next"};var f=n(3482),k=n(3335),y=n(8296),$=n(5131),S=n(1472),D=n(3190),V=n(7251),I=n(2262),j=n(8714),z={name:"CartBundle",components:{BundleAccordion:$.default,CartBundleSlide:S.default,IconChevronDown:D.Z,IconChevronLeft:V.Z,IconChevronRight:I.Z,IconTag:j.Z,Swiper:f.tq,SwiperSlide:f.o5},props:{bundles:{type:Array,default:()=>[]},fromMainCart:{type:Boolean,default:!1},bundle:{type:Object,default:()=>({})}},emits:["check-cart-bundle"],emits:["add-bundle"],setup:()=>({modules:[k.s5,k.W_]}),data(){return{swiperSettings:{breakpoints:{0:{slidesPerView:1,spaceBetween:10},768:{slidesPerView:1,spaceBetween:10},1280:{slidesPerView:this.fromMainCart?3:1,spaceBetween:18}},navigation:{enabled:!0,nextEl:".js-cart-bundle-swiper-button.swiper-button-next",prevEl:".js-cart-bundle-swiper-button.swiper-button-prev"}},swiper:null,activeItems:[],swiperKey:0,bundleHeading:window.cnvs.productBundles.cartHeader,bundleCopy:window.cnvs.productBundles.cartDescription}},computed:{...(0,y.rn)({cart:e=>e.cart.response}),ctaText(){return this.activeItems.length>0?this.$string("product_bundles.cart_cta_cancel"):this.$string("product_bundles.cart_cta")}},methods:{onSwiper(e){this.swiper=e},updateActiveItems(e){this.activeItems=e}}},T=(0,n(4407).Z)(z,[["render",function(e,t,n,f,k,y){const $=(0,a.up)("icon-tag"),S=(0,a.up)("icon-chevron-down"),D=(0,a.up)("icon-chevron-left"),V=(0,a.up)("cart-bundle-slide"),I=(0,a.up)("swiper-slide"),j=(0,a.up)("swiper"),z=(0,a.up)("icon-chevron-right"),T=(0,a.up)("bundle-accordion");return(0,a.wg)(),(0,a.iD)(a.HY,null,[n.fromMainCart?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(T,{key:0,class:"cart-bundle",section:"cartBundles",onUpdateActiveItems:y.updateActiveItems},{header:(0,a.w5)((()=>[(0,a._)("div",r,[(0,a._)("span",null,[(0,a.Wm)($)]),(0,a._)("div",i,[(0,a._)("span",{class:"cart-bundle__title",textContent:(0,a.zw)(e.$variable("productBundles.cartHeader"))},null,8,s),(0,a._)("p",{class:"cart-bundle__description",textContent:(0,a.zw)(e.$variable("productBundles.cartDescription"))},null,8,l)]),(0,a._)("div",d,[(0,a._)("span",{class:"cart-bundle__cta",textContent:(0,a.zw)(y.ctaText)},null,8,o),(0,a._)("span",c,[(0,a.Wm)(S)])])])])),item:(0,a.w5)((()=>[(0,a._)("div",u,[(0,a._)("div",null,[(0,a._)("button",p,[(0,a.Wm)(D)]),(0,a._)("div",b,[(0,a.Wm)(j,{ref:"bundleCarouselFromDrawer",key:"cart-bundle",class:"cart-bundle__slide-wrap",modules:f.modules,breakpoints:k.swiperSettings.breakpoints,navigation:k.swiperSettings.navigation,observer:!0,"observe-parents":!0,"prevent-interaction-on-transition":!0,"slides-per-view":1,"watch-overflow":!0,onSwiper:y.onSwiper},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.bundles,((e,t)=>((0,a.wg)(),(0,a.j4)(I,{key:`cart-bundle-drawer-slide-${t}`,class:"cart-bundle__line-item swiper-slide","data-index":"${index}","data-product-id":"${item.id}","data-next-slide":"${window.theme.strings.accessibility.nextSlideMessage}","data-prev-slide":"${window.theme.strings.accessibility.prevSlideMessage}"},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{bundle:e},null,8,["bundle"])])),_:2},1024)))),128))])),_:1},8,["modules","breakpoints","navigation","onSwiper"])]),(0,a._)("button",w,[(0,a.Wm)(z)])])])])),_:1},8,["onUpdateActiveItems"])),n.fromMainCart?((0,a.wg)(),(0,a.iD)("div",_,[(0,a._)("div",g,[k.bundleHeading?((0,a.wg)(),(0,a.iD)("h2",m,[(0,a.Uk)((0,a.zw)(k.bundleHeading)+" ",1),(0,a.Wm)($)])):(0,a.kq)("",!0),k.bundleCopy?((0,a.wg)(),(0,a.iD)("p",{key:1,class:"cart-bundle__description--desktop body-1",textContent:(0,a.zw)(k.bundleCopy)},null,8,h)):(0,a.kq)("",!0),(0,a.wy)((0,a._)("div",v,[(0,a._)("div",C,[(0,a.Wm)(D)],512),(0,a._)("div",x,[(0,a.Wm)(z)],512)],512),[[a.F8,n.bundles.length>3]])]),(0,a.Wm)(j,{ref:"bundleCarousel",key:"cart-bundle-main-cart",class:"cart-bundle__slide-wrap",modules:f.modules,breakpoints:k.swiperSettings.breakpoints,navigation:k.swiperSettings.navigation,observer:!0,"observe-parents":!0,"prevent-interaction-on-transition":!0,"slides-per-view":3,"watch-overflow":!0,onSwiper:y.onSwiper,onUpdate:e.handleUpdate},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.bundles,((e,t)=>((0,a.wg)(),(0,a.j4)(I,{key:`cart-bundle-slide-${t}`,class:"cart-bundle__line-item swiper-slide","data-index":"${index}","data-product-id":"${item.id}","data-next-slide":"${window.theme.strings.accessibility.nextSlideMessage}","data-prev-slide":"${window.theme.strings.accessibility.prevSlideMessage}"},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{bundle:e},null,8,["bundle"])])),_:2},1024)))),128))])),_:1},8,["modules","breakpoints","navigation","onSwiper","onUpdate"])])):(0,a.kq)("",!0)],64)}]])}}]);
//# sourceMappingURL=2123.bundle.min.js.map?v=1733162424563
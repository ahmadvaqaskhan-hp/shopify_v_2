"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1978],{5966:function(t,e,s){var o=s(3621);e.Z={name:"CheckoutPostalCodeValidator",components:{IconCloseFill:o.Z},data(){const{checkout:t}=window.cnvs.strings;return{postalCodeField:null,postalCodeFieldId:"checkout_shipping_address_zip",postalCodeValue:"",postalCodeWrapper:null,postalCodeErrorSelector:"[id=error-for-zip]",postalCodeShopifyError:null,postalCodeWrapperSelector:"[data-address-field='zip']",submitButton:null,submitButtonId:"continue_button",translations:{...t},isChangedByUser:!1,isFormSubmitted:!1,isLoading:!1,result:null}},computed:{isContactInfoStep:()=>"contact_information"===Shopify.Checkout.step,isZipValid(){return/^(?:(?:[2-8]\d|9[0-7]|0?[28]|0?9(?=09))(?:\d{2}))$/.test(this.postalCodeValue)},appDomain:()=>cnvs.credentials.hyperx_stacklet.domain},watch:{result(t){!1===t?this.addPostalCodeWrapperError():this.removePostalCodeWrapperError()},postalCodeWrapper(){!1===this.result?this.addPostalCodeWrapperError():this.removePostalCodeWrapperError()}},mounted(){this.isContactInfoStep&&(this.setSubmitButton(),this.setPostalCodeWrapper(),this.setPostalCodeField(),this.setPostalCodeShopifyError(),this.handleSubmit())},methods:{setPostalCodeField(){this.postalCodeField=document.getElementById(this.postalCodeFieldId),this.postalCodeField.setAttribute("maxlength",4),this.postalCodeField.addEventListener("keyup",this.handleInputKeyup),this.postalCodeField.addEventListener("change",this.handleInputChange),this.setPostalCodeValue()},setPostalCodeShopifyError(){this.postalCodeShopifyError=document.querySelector(this.postalCodeErrorSelector)},setPostalCodeWrapper(){this.postalCodeWrapper=document.querySelector(this.postalCodeWrapperSelector)},addPostalCodeWrapperError(){this.postalCodeWrapper.classList.add("field--error")},removePostalCodeWrapperError(){this.postalCodeWrapper.classList.remove("field--error")},setPostalCodeValue(){this.postalCodeValue=this.postalCodeField.value},setSubmitButton(){this.submitButton=document.getElementById(this.submitButtonId),this.submitButton.disabled=!0,this.submitButton.classList.add("btn--disabled")},handleInputChange(){this.setPostalCodeValue(),this.isFormSubmitted=!1,this.isChangedByUser=!0,this.handleSubmit()},handleInputKeyup(){this.setPostalCodeValue(),this.isFormSubmitted=!1,this.isLoading=!1,this.result=null,this.submitButton.disabled=!0,this.submitButton.classList.add("btn--disabled")},async handleSubmit(){this.isFormSubmitted||(this.isFormSubmitted=!0,this.result=null,this.submitButton.disabled=!0,this.submitButton.classList.add("btn--disabled"),this.isZipValid&&(this.isLoading=!0,this.result=await fetch(`https://${this.appDomain}/api/postcode-validator/postcode-lookup?postcode=${this.postalCodeValue}`).then((t=>t.json())).catch((()=>!1)),this.isLoading=!1,!0===this.result&&(this.submitButton.disabled=!1,this.submitButton.classList.remove("btn--disabled"))))},clearForm(){this.isFormSubmitted=!1,this.isLoading=!1,this.result=null,this.postalCodeField.value="",this.setPostalCodeValue()}}}},5893:function(t,e,s){s.d(e,{s:function(){return h}});var o=s(1797);const i={key:0,class:"postal-code-validator"},a=["textContent"],l=["textContent"],d=["textContent"],r=["textContent"],n={key:3,class:"postal-code-validator__success-notice"},u=["textContent"],p={key:1};function h(t,e,s,h,c,C){var m;const b=(0,o.up)("IconCloseFill");return C.isContactInfoStep&&c.postalCodeField?((0,o.wg)(),(0,o.iD)("div",i,[c.isFormSubmitted&&(!C.isZipValid&&""!==c.postalCodeValue||!1===c.result)?((0,o.wg)(),(0,o.iD)("button",{key:0,type:"button",class:"postal-code-validator__clear",onClick:e[0]||(e[0]=function(){return C.clearForm&&C.clearForm(...arguments)})},[(0,o.Wm)(b)])):(0,o.kq)("",!0),!c.isChangedByUser&&c.postalCodeShopifyError?((0,o.wg)(),(0,o.iD)("p",{key:1,class:"postal-code-validator__error-message",textContent:(0,o.zw)(null===(m=c.postalCodeShopifyError)||void 0===m?void 0:m.innerText)},null,8,a)):((0,o.wg)(),(0,o.iD)(o.HY,{key:2},[c.isFormSubmitted&&!C.isZipValid&&""!==c.postalCodeValue?((0,o.wg)(),(0,o.iD)("p",{key:0,class:"postal-code-validator__error-message",textContent:(0,o.zw)(c.translations.postal_code_validator.error_message)},null,8,l)):(0,o.kq)("",!0),c.isLoading?((0,o.wg)(),(0,o.iD)("p",{key:1,class:"postal-code-validator__loading-message",textContent:(0,o.zw)(c.translations.postal_code_validator.loading_message)},null,8,d)):(0,o.kq)("",!0),c.isFormSubmitted&&!1===c.result?((0,o.wg)(),(0,o.iD)("p",{key:2,class:"postal-code-validator__error-message",textContent:(0,o.zw)(c.translations.postal_code_validator.invalid_zip_message)},null,8,r)):(0,o.kq)("",!0),c.isFormSubmitted&&!0===c.result?((0,o.wg)(),(0,o.iD)("div",n,[(0,o._)("div",{class:"postal-code-validator__success-message",textContent:(0,o.zw)(c.translations.postal_code_validator.valid_zip_message)},null,8,u)])):(0,o.kq)("",!0)],64))])):((0,o.wg)(),(0,o.iD)("span",p))}},6961:function(t,e,s){s.r(e);var o=s(9183),i=s(7162);const a=(0,s(4407).Z)(i.Z,[["render",o.s]]);e.default=a},7162:function(t,e,s){s.d(e,{Z:function(){return o.Z}});var o=s(5966)},9183:function(t,e,s){s.d(e,{s:function(){return o.s}});var o=s(5893)}}]);
//# sourceMappingURL=component.checkout-postal-code-validator.js.map?v=1733162424563